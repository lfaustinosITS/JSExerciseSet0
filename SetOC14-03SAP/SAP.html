<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
	<link rel="stylesheet" href="sap.css" />
    <title>Single Page Application</title>
</head>
<body>
    <div class="container" id="postContainer">
    
    </div>

    <script>
        //Template 1
        function createTemplate1(post) {
            const template = document.createElement('div');
            template.classList.add('template1');
            template.innerHTML = `
                <div class="image">
                    <img src="${post.image}" alt="Image">
                </div>
                <div class="content">
                    <h2>${post.title}</h2><br>
                    ${post.text}
                </div>
            `;
            return template;
        }

        //Template 2
        function createTemplate2(post) {
            const template = document.createElement('div');
            template.classList.add('template2');
            template.innerHTML = `
                <div class="image">
                    <img src="${post.image}" alt="Image">
                </div>
                <div class="content">
                    <h2>${post.title}</h2>
                    ${post.text}
                    <a href="#" id="backLink">Back to List</a>
                </div>
            `;
            return template;
        }

        //Navigation
        function navigateToTemplate2(post) {
            const postContainer = document.getElementById('postContainer');
            postContainer.innerHTML = '';
            const template2 = createTemplate2(post);
            postContainer.appendChild(template2);
            const backLink = document.getElementById('backLink');
            backLink.addEventListener('click', function(event) {
                event.preventDefault();
                loadPosts();
            });
        }

        //Template 1 click
        function template1Click(post) {
            return function() {
                navigateToTemplate2(post);
            }
        }

        //JSON Load information
        function loadPosts() {
            fetch('post.json')
                .then(response => response.json())
                .then(posts => {
                    const postContainer = document.getElementById('postContainer');
                    postContainer.innerHTML = '';
                    for (const key in posts) {
                        if (posts.hasOwnProperty(key)) {
                            const post = posts[key];
                            const template1 = createTemplate1(post);
                            template1.addEventListener('click', template1Click(post));
                            postContainer.appendChild(template1);
                        }
                    }
                })
            .catch(error => console.log(error));
        }

        //Initialize App
        function initializeApp() {
            loadPosts();
        }

        initializeApp();
    </script>
</body>
</html>
